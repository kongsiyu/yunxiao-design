# 云效需求更新 - 整合到主流程
# 在 check-requirements.ps1 中，保存 PRD 后添加以下代码

# 更新云效需求描述
Write-Host "  Updating workitem description..." -ForegroundColor Yellow
$updateBody = @{ description = $prdDoc } | ConvertTo-Json -Compress
try {
    $updateResponse = Invoke-RestMethod -Uri $DetailUrl -Method Put -Headers $Headers -Body $updateBody
    Start-Sleep -Milliseconds 500
    $verifyResponse = Invoke-RestMethod -Uri $DetailUrl -Method Get -Headers $Headers
    Write-Host "  Description updated: $($verifyResponse.description.Length) chars" -ForegroundColor Green
    Write-Host "  [NOTIFY] PRD generated and synced for $($item.serialNumber)" -ForegroundColor Magenta
} catch {
    Write-Host "  Warning: Failed to update description" -ForegroundColor Yellow
    Write-Host "  [NOTIFY] PRD generated for $($item.serialNumber)" -ForegroundColor Magenta
}
